CREATE TABLE TONTA(ID INTEGER, VALOR FLOAT, FECHA DATE);

BEGIN
FOR I IN 1..10 LOOP
INSERT INTO TONTA VALUES(I,I,SYSDATE);
END LOOP;
END
/

SELECT * FROM TONTA;

DECLARE
CURSOR CURSOR_TONTA IS SELECT * FROM TONTA;
BEGIN

FOR REC IN CURSOR_TONTA LOOP
DBMS_OUTPUT.PUT_LINE('EN CADA VUELTA DEL SELECT DEL CURSOR VEMOS ESTO');
DBMS_OUTPUT.PUT_LINE(REC.VALOR);
END LOOP;
END;
/


CREATE OR REPLACE PROCEDURE ACUMULADO_TONTA(SUMATORIA OUT FLOAT)
AS
CURSOR CURSOR_TONTA IS SELECT * FROM TONTA;
BEGIN
SUMATORIA:=0;
FOR REC IN CURSOR_TONTA LOOP
SUMATORIA:=SUMATORIA+REC.ID*REC.VALOR;
END LOOP;
END;
/

DECLARE
VALOR FLOAT;
BEGIN
ACUMULADO_TONTA(VALOR);
DBMS_OUTPUT.PUT_LINE(VALOR);
END;
/

/***********************************************************************/

DECLARE
CURSOR CURSOR_TONTA2 IS SELECT * FROM TONTA FOR UPDATE;
BEGIN
FOR REC IN CURSOR_TONTA2 LOOP
UPDATE TONTA SET VALOR=VALOR*2 WHERE CURRENT OF CURSOR_TONTA2;
END LOOP;
END;
/

SELECT * FROM TONTA;
